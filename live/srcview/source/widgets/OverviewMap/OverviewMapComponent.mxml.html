<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>OverviewMapComponent.mxml</title>
<link rel="stylesheet" type="text/css" href="../../../SourceStyles.css"/>
</head>

<body><pre><span class="MXMLProcessing_Instruction">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="MXMLComment">&lt;!--</span><span class="MXMLComment">
///////////////////////////////////////////////////////////////////////////
// Copyright (c) 2010-2011 Esri. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//    http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
///////////////////////////////////////////////////////////////////////////
</span><span class="MXMLComment">--&gt;</span>
<span class="MXMLComponent_Tag">&lt;s:SkinnableContainer</span><span class="MXMLDefault_Text"> xmlns:fx="</span><span class="MXMLString">http://ns.adobe.com/mxml/2009</span><span class="MXMLDefault_Text">"
                      xmlns:s="</span><span class="MXMLString">library://ns.adobe.com/flex/spark</span><span class="MXMLDefault_Text">"
                      xmlns:mx="</span><span class="MXMLString">library://ns.adobe.com/flex/mx</span><span class="MXMLDefault_Text">"
                      xmlns:esri="</span><span class="MXMLString">http://www.esri.com/2008/ags</span><span class="MXMLDefault_Text">"
                      creationComplete="</span><span class="ActionScriptDefault_Text">init</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>

    <span class="MXMLComment">&lt;!--</span><span class="MXMLComment"> this component is used by the OverviewMapWidget </span><span class="MXMLComment">--&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;fx:Script&gt;</span>
        &lt;![CDATA[
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Graphic</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Map</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ExtentEvent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MapEvent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Extent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MapPoint</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Polygon</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArcGISDynamicMapServiceLayer</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArcGISImageServiceLayer</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArcGISTiledMapServiceLayer</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArcIMSMapServiceLayer</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FeatureLayer</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GraphicsLayer</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Layer</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">OpenStreetMapLayer</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">symbols</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SimpleFillSymbol</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">symbols</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SimpleLineSymbol</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">virtualearth</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">VETiledLayer</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">AppEvent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ConfigData</span>;

            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">collections</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArrayCollection</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">core</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FlexGlobals</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">EffectEvent</span>;

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">lineSym</span>:<span class="ActionScriptDefault_Text">SimpleLineSymbol</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SimpleLineSymbol</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"solid"</span><span class="ActionScriptOperator">,</span> 0xFF0000<span class="ActionScriptOperator">,</span> 0.7<span class="ActionScriptOperator">,</span> 2<span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">currentExtentSym</span>:<span class="ActionScriptDefault_Text">SimpleFillSymbol</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">SimpleFillSymbol</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"solid"</span><span class="ActionScriptOperator">,</span> 0xFF0000<span class="ActionScriptOperator">,</span> 0.2<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">lineSym</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">map</span>:<span class="ActionScriptDefault_Text">Map</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">configData</span>:<span class="ActionScriptDefault_Text">ConfigData</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">openDefaultToolTip</span>:<span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">closeDefaultToolTip</span>:<span class="ActionScriptDefault_Text">String</span>;

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">graphicsLayer</span>:<span class="ActionScriptDefault_Text">GraphicsLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">GraphicsLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">proxyUrl</span>:<span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">overviewGraphic</span>:<span class="ActionScriptDefault_Text">Graphic</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Graphic</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">useBaseMapLayer</span>:<span class="ActionScriptDefault_Text">Boolean</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">baseMapSwitched</span>:<span class="ActionScriptDefault_Text">Boolean</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">currentBaseMapId</span>:<span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">hasOverviewGraphicBeenMoved</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lastMouseMapX</span>:<span class="ActionScriptDefault_Text">Number</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lastMouseMapY</span>:<span class="ActionScriptDefault_Text">Number</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">basemapLayerObjectToLayer</span>:<span class="ActionScriptDefault_Text">Dictionary</span>;
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isCollapsible</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;

            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">openToolTip</span>:<span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">closeToolTip</span>:<span class="ActionScriptDefault_Text">String</span>;

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">init</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">// wait for the current state to be updated based on config
</span>                <span class="ActionScriptDefault_Text">viewBox</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptDefault_Text">borderRect1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;

                <span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">buttonMode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CLICK</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">toggleIcon_clickHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">viewBox</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">setStyle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"backgroundColor"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">FlexGlobals</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">topLevelApplication</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getStyle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"backgroundColor"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">toggleIcon_clickHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"collapsed"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptString">"expanded"</span> : <span class="ActionScriptString">"collapsed"</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">expansionDirection</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">direction</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">direction</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">ExpansionDirection</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">UP_RIGHT</span>:
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rotation</span> <span class="ActionScriptOperator">=</span> 90;
                        <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iconMask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iconMask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                        <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iconMask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iconMask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span> <span class="ActionScriptOperator">=</span> 0;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">ExpansionDirection</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DOWN_RIGHT</span>:
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rotation</span> <span class="ActionScriptOperator">=</span> 180;
                        <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iconMask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iconMask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                        <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iconMask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iconMask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span> <span class="ActionScriptOperator">=</span> 0;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">case</span> <span class="ActionScriptDefault_Text">ExpansionDirection</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DOWN_LEFT</span>:
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rotation</span> <span class="ActionScriptOperator">=</span> 270;
                        <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iconMask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">right</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iconMask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">top</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                        <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iconMask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">left</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">iconMask</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bottom</span> <span class="ActionScriptOperator">=</span> 0;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">_configXML</span>:<span class="ActionScriptDefault_Text">XML</span>;

            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">get</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">XML</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">_configXML</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptReserved">set</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">value</span>:<span class="ActionScriptDefault_Text">XML</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">_configXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">value</span>;

                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptComment">// overviewmap open/close tooltip label
</span>                    <span class="ActionScriptDefault_Text">openToolTip</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">labels</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opentooltip</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">openDefaultToolTip</span>;
                    <span class="ActionScriptDefault_Text">closeToolTip</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">labels</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">closetooltip</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">closeDefaultToolTip</span>;

                    <span class="ActionScriptComment">// proxyURL
</span>                    <span class="ActionScriptDefault_Text">proxyUrl</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyUrl</span>;

                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">url</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">url</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">type</span>:<span class="ActionScriptDefault_Text">String</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">useProxy</span>:<span class="ActionScriptDefault_Text">Boolean</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">url</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">useBaseMapLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                        <span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">type</span>;
                        <span class="ActionScriptDefault_Text">useProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">useproxy</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">useproxy</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"true"</span>;
                        <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toLowerCase</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"tiled"</span>:
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tiledlayer</span>:<span class="ActionScriptDefault_Text">ArcGISTiledMapServiceLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArcGISTiledMapServiceLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">url</span><span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptDefault_Text">tiledlayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">alpha</span>;
                                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">proxyUrl</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">useProxy</span><span class="ActionScriptBracket/Brace">)</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptDefault_Text">tiledLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">proxyUrl</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">tiledlayer</span><span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptReserved">break</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"dynamic"</span>:
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dynlayer</span>:<span class="ActionScriptDefault_Text">ArcGISDynamicMapServiceLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArcGISDynamicMapServiceLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">url</span><span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptDefault_Text">dynlayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">alpha</span>;
                                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">proxyUrl</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">useProxy</span><span class="ActionScriptBracket/Brace">)</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptDefault_Text">dynlayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">proxyUrl</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">dynlayer</span><span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptReserved">break</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">else</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">useBaseMapLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                        <span class="ActionScriptDefault_Text">basemapLayerObjectToLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Dictionary</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;

                        <span class="ActionScriptComment">// get the base map layers
</span>                        <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">basemaps</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span>;
                            <span class="ActionScriptDefault_Text">useProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useProxy</span>;
                            <span class="ActionScriptDefault_Text">proxyUrl</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyUrl</span>;

                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">alpha</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">autoRefresh</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">autoRefresh</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">label</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">token</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">token</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">urlBaseMap</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">bingMapKey</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">key</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">style</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">style</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">visible</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">visibleLayers</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visibleLayers</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">culture</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">culture</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">useamf</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useamf</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">mode</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mode</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">noData</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">noData</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">serviceHost</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceHost</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">serviceName</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceName</span>;
                            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">definitionExpression</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">definitionExpression</span>;

                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layerToAdd</span>:<span class="ActionScriptDefault_Text">Layer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                            <span class="ActionScriptReserved">switch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toLowerCase</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"tiled"</span>:
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tiledLayer</span>:<span class="ActionScriptDefault_Text">ArcGISTiledMapServiceLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArcGISTiledMapServiceLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">urlBaseMap</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptDefault_Text">tiledLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">alpha</span>;
                                    <span class="ActionScriptDefault_Text">tiledLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">label</span>;
                                    <span class="ActionScriptDefault_Text">tiledLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">visible</span>;
                                    <span class="ActionScriptDefault_Text">tiledLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">token</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">token</span>;
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">proxyUrl</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">useProxy</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">tiledLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">proxyUrl</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>

                                    <span class="ActionScriptDefault_Text">layerToAdd</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">tiledLayer</span>;
                                    <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"dynamic"</span>:
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dynLayer</span>:<span class="ActionScriptDefault_Text">ArcGISDynamicMapServiceLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArcGISDynamicMapServiceLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">urlBaseMap</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptDefault_Text">dynLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">alpha</span>;
                                    <span class="ActionScriptDefault_Text">dynLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">label</span>;
                                    <span class="ActionScriptDefault_Text">dynLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">visible</span>;
                                    <span class="ActionScriptDefault_Text">dynLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">token</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">token</span>;
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">autoRefresh</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">setInterval</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">dynLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">refresh</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">autoRefresh</span> <span class="ActionScriptOperator">*</span> 1000<span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">visibleLayers</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">vizLayers</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">visibleLayers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span>;
                                        <span class="ActionScriptDefault_Text">dynLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visibleLayers</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">vizLayers</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">proxyUrl</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">useProxy</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">dynLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">proxyUrl</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptDefault_Text">layerToAdd</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">dynlayer</span>;
                                    <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"feature"</span>:
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">featureLayer</span>:<span class="ActionScriptDefault_Text">FeatureLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">FeatureLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">urlBaseMap</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptDefault_Text">featureLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">alpha</span>;
                                    <span class="ActionScriptDefault_Text">featureLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">label</span>;
                                    <span class="ActionScriptDefault_Text">featureLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">visible</span>;
                                    <span class="ActionScriptDefault_Text">featureLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">outFields</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptString">'*'</span> <span class="ActionScriptBracket/Brace">]</span>;
                                    <span class="ActionScriptDefault_Text">featureLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">token</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">token</span>;
                                    <span class="ActionScriptDefault_Text">featureLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useAMF</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">useamf</span>;
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mode</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">featureLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mode</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">proxyUrl</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">useProxy</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">featureLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">proxyUrl</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">definitionExpression</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">definitionExpression</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">""</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">featureLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">definitionExpression</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">definitionExpression</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptDefault_Text">layerToAdd</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">featureLayer</span>;
                                    <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"bing"</span>:
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">veTiledLayer</span>:<span class="ActionScriptDefault_Text">VETiledLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">VETiledLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptDefault_Text">veTiledLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">alpha</span>;
                                    <span class="ActionScriptDefault_Text">veTiledLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">label</span>;
                                    <span class="ActionScriptDefault_Text">veTiledLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">visible</span>;
                                    <span class="ActionScriptDefault_Text">veTiledLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">key</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bingMapKey</span>;
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">style</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">veTiledLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapStyle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">style</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">culture</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">veTiledLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">culture</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">culture</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptDefault_Text">layerToAdd</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">veTiledLayer</span>;
                                    <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"image"</span>:
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">imgLayer</span>:<span class="ActionScriptDefault_Text">ArcGISImageServiceLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArcGISImageServiceLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">urlBaseMap</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptDefault_Text">imgLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">alpha</span>;
                                    <span class="ActionScriptDefault_Text">imgLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">label</span>;
                                    <span class="ActionScriptDefault_Text">imgLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">visible</span>;
                                    <span class="ActionScriptDefault_Text">imgLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">noData</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">noData</span>;
                                    <span class="ActionScriptDefault_Text">imgLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">token</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">token</span>;
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">proxyUrl</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">useProxy</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">imgLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">proxyUrl</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptDefault_Text">layerToAdd</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">imgLayer</span>;
                                    <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"arcims"</span>:
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">arcimsLayer</span>:<span class="ActionScriptDefault_Text">ArcIMSMapServiceLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArcIMSMapServiceLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptDefault_Text">arcimsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">alpha</span>;
                                    <span class="ActionScriptDefault_Text">arcimsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">label</span>;
                                    <span class="ActionScriptDefault_Text">arcimsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">visible</span>;
                                    <span class="ActionScriptDefault_Text">arcimsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceHost</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">serviceHost</span>;
                                    <span class="ActionScriptDefault_Text">arcimsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">serviceName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">serviceName</span>;
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">autoRefresh</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">setInterval</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">arcimsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">refresh</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">autoRefresh</span> <span class="ActionScriptOperator">*</span> 1000<span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">visibleLayers</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">visLayers</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">visibleLayers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span>;
                                        <span class="ActionScriptDefault_Text">arcimsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visibleLayers</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ArrayCollection</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">visLayers</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">proxyUrl</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">useProxy</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">arcimsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">proxyUrl</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptDefault_Text">layerToAdd</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">arcimsLayer</span>;
                                    <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptReserved">case</span> <span class="ActionScriptString">"osm"</span>:
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">osmLayer</span>:<span class="ActionScriptDefault_Text">OpenStreetMapLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">OpenStreetMapLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                                    <span class="ActionScriptDefault_Text">osmLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">alpha</span>;
                                    <span class="ActionScriptDefault_Text">osmLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">label</span>;
                                    <span class="ActionScriptDefault_Text">osmLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">label</span>;
                                    <span class="ActionScriptDefault_Text">osmLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">visible</span>;
                                    <span class="ActionScriptDefault_Text">layerToAdd</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">osmLayer</span>;
                                    <span class="ActionScriptReserved">break</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptBracket/Brace">}</span>

                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layerToAdd</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layerToAdd</span><span class="ActionScriptBracket/Brace">)</span>;
                                <span class="ActionScriptDefault_Text">basemapLayerObjectToLayer</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layerToAdd</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">BASEMAP_SWITCH</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">viewContainer_basemapSwitchHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptComment">// collapsible
</span>                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">collapsible</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">isCollapsible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">collapsible</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"true"</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isCollapsible</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">initialstate</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"open"</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptString">"expanded"</span> : <span class="ActionScriptString">"collapsed"</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">else</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"noncollapsible"</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"collapsed"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptComment">// turn layer(s) off if component is collapsed
</span>                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layer</span>:<span class="ActionScriptDefault_Text">Layer</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptDefault_Text">viewBox</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptDefault_Text">borderRect1</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">updateOverviewExtentFromMap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">extent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">extent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">expand</span><span class="ActionScriptBracket/Brace">(</span>3<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visibleArea</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">updateMapExtentFromOverview</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">center</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">extent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">center</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">map_extentChangeHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ExtentEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">updateOverviewExtentFromMap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">updateOverviewGraphicVisibility</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">updateOverviewGraphicVisibility</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">//hide overview box if larger than overview map
</span>                <span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">extent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">contains</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">overviewMap_loadHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MapEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">graphicsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"overviewMapGraphicsLayer"</span>;
                <span class="ActionScriptDefault_Text">graphicsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">symbol</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">currentExtentSym</span>;
                <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addLayer</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">graphicsLayer</span><span class="ActionScriptBracket/Brace">)</span>;

                <span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">extent</span>;
                <span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MOUSE_DOWN</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">overviewGraphic_mouseDownHandler</span><span class="ActionScriptBracket/Brace">)</span>;

                <span class="ActionScriptComment">//update map extent when mouse moves out of the overview map
</span>                <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ROLL_OUT</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">overviewMap_mouseRollOutHandler</span><span class="ActionScriptBracket/Brace">)</span>;

                <span class="ActionScriptDefault_Text">graphicsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">add</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptBracket/Brace">)</span>;

                <span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ExtentEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">EXTENT_CHANGE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">map_extentChangeHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">updateOverviewExtentFromMap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">updateOverviewGraphicVisibility</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">overviewMap_mouseRollOutHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MOUSE_MOVE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">overviewMap_mouseMoveHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MOUSE_UP</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">overviewMap_mouseUpHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MOUSE_DOWN</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">overviewGraphic_mouseDownHandler</span><span class="ActionScriptBracket/Brace">)</span>;

                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">hasOverviewGraphicBeenMoved</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">hasOverviewGraphicBeenMoved</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">updateMapExtentFromOverview</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">overviewGraphic_mouseDownHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MOUSE_DOWN</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">overviewGraphic_mouseDownHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MOUSE_UP</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">overviewMap_mouseUpHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MOUSE_MOVE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">overviewMap_mouseMoveHandler</span><span class="ActionScriptBracket/Brace">)</span>;

                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">overviewCenterMapPoint</span>:<span class="ActionScriptDefault_Text">MapPoint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">extent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">center</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mouseMapPoint</span>:<span class="ActionScriptDefault_Text">MapPoint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toMapFromStage</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stageX</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stageY</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">lastMouseMapX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mouseMapPoint</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span>;
                <span class="ActionScriptDefault_Text">lastMouseMapY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mouseMapPoint</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">overviewMap_mouseMoveHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">hasOverviewGraphicBeenMoved</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;

                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">overviewPolygon</span>:<span class="ActionScriptDefault_Text">Polygon</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Polygon</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">overviewCenterMapPoint</span>:<span class="ActionScriptDefault_Text">MapPoint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">overviewPolygon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">extent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">center</span>;

                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mouseMapPoint</span>:<span class="ActionScriptDefault_Text">MapPoint</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toMapFromStage</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stageX</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stageY</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">deltaMapX</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mouseMapPoint</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">lastMouseMapX</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">deltaMapY</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mouseMapPoint</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">-</span> <span class="ActionScriptDefault_Text">lastMouseMapY</span>;
                <span class="ActionScriptDefault_Text">lastMouseMapX</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mouseMapPoint</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span>;
                <span class="ActionScriptDefault_Text">lastMouseMapY</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mouseMapPoint</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span>;

                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">ring</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">overviewPolygon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeRing</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">iMapPoint</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 4; <span class="ActionScriptDefault_Text">iMapPoint</span> <span class="ActionScriptOperator">&gt;=</span> 0; <span class="ActionScriptDefault_Text">iMapPoint</span><span class="ActionScriptOperator">--</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">ring</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">iMapPoint</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">deltaMapX</span>;
                    <span class="ActionScriptDefault_Text">ring</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">iMapPoint</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">deltaMapY</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">overviewPolygon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addRing</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ring</span><span class="ActionScriptBracket/Brace">)</span>;

                <span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">refresh</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">overviewMap_mouseUpHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MOUSE_MOVE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">overviewMap_mouseMoveHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MOUSE_UP</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">overviewMap_mouseUpHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">overviewGraphic</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">MouseEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">MOUSE_DOWN</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">overviewGraphic_mouseDownHandler</span><span class="ActionScriptBracket/Brace">)</span>;

                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">hasOverviewGraphicBeenMoved</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">hasOverviewGraphicBeenMoved</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">updateMapExtentFromOverview</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">viewContainer_basemapSwitchHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">baseMapSwitched</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptDefault_Text">currentBaseMapId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">data</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">String</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"expanded"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"noncollapsible"</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">showCurrentBaseMap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentBaseMapId</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">showCurrentBaseMap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentBaseMapId</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">configBasemaps</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">basemaps</span>;

                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentBaseMapId</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">selectedLabel</span>:<span class="ActionScriptDefault_Text">String</span>;
                    <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">uint</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">configBasemaps</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configBasemaps</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">currentBaseMapId</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">selectedLabel</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configBasemaps</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span>;
                            <span class="ActionScriptReserved">break</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">selectedLabel</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptComment">// turn on the selected basemap layers (more than one layer can have the same label)
</span>                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layers</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
                        <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">configBasemaps</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">basemapLabel</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configBasemaps</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">label</span>;
                            <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layer</span>:<span class="ActionScriptDefault_Text">Layer</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">basemapLabel</span><span class="ActionScriptBracket/Brace">)</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">selectedLabel</span><span class="ActionScriptBracket/Brace">)</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptReserved">else</span>
                                    <span class="ActionScriptBracket/Brace">{</span>
                                        <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                                    <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">sequence_effectStartHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">EffectEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"expanded"</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"noncollapsible"</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">useBaseMapLayer</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">baseMapSwitched</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">showCurrentBaseMap</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentBaseMapId</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptReserved">else</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptComment">// on start up and if basemap is not switched
</span>                            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">basemapLayerObjectToLayer</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layer</span>:<span class="ActionScriptDefault_Text">Layer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObjectToLayer</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptBracket/Brace">]</span>;
                                <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">basemapLayerObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">else</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">overviewMapLayer</span>:<span class="ActionScriptDefault_Text">Layer</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">overviewMapLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">sequence_effectEndHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">EffectEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">currentState</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"collapsed"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptComment">// turn layer(s) off if component is collapsed
</span>                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layer</span>:<span class="ActionScriptDefault_Text">Layer</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">overviewMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">GraphicsLayer</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"overviewMapGraphicsLayer"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;/fx:Script&gt;</span>

    <span class="MXMLComponent_Tag">&lt;s:states&gt;</span>
        <span class="MXMLComponent_Tag">&lt;s:State</span><span class="MXMLDefault_Text"> name="</span><span class="MXMLString">collapsed</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLComponent_Tag">&lt;s:State</span><span class="MXMLDefault_Text"> name="</span><span class="MXMLString">expanded</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLComponent_Tag">&lt;s:State</span><span class="MXMLDefault_Text"> name="</span><span class="MXMLString">noncollapsible</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/s:states&gt;</span>

    <span class="MXMLComponent_Tag">&lt;s:transitions&gt;</span>
        <span class="MXMLComponent_Tag">&lt;s:Transition</span><span class="MXMLDefault_Text"> fromState="</span><span class="MXMLString">collapsed</span><span class="MXMLDefault_Text">" toState="</span><span class="MXMLString">expanded</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
            <span class="MXMLComponent_Tag">&lt;s:Sequence</span><span class="MXMLDefault_Text"> effectEnd="</span><span class="ActionScriptDefault_Text">sequence_effectEndHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">" effectStart="</span><span class="ActionScriptDefault_Text">sequence_effectStartHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                <span class="MXMLComponent_Tag">&lt;s:Resize</span><span class="MXMLDefault_Text"> duration="</span><span class="MXMLString">800</span><span class="MXMLDefault_Text">" target="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">viewBox</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                <span class="MXMLComponent_Tag">&lt;s:Rotate</span><span class="MXMLDefault_Text"> angleBy="</span><span class="MXMLString">180</span><span class="MXMLDefault_Text">"
                          autoCenterTransform="</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">"
                          duration="</span><span class="MXMLString">300</span><span class="MXMLDefault_Text">"
                          target="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">toggleIcon</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/s:Sequence&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/s:Transition&gt;</span>
        <span class="MXMLComponent_Tag">&lt;s:Transition</span><span class="MXMLDefault_Text"> fromState="</span><span class="MXMLString">expanded</span><span class="MXMLDefault_Text">" toState="</span><span class="MXMLString">collapsed</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
            <span class="MXMLComponent_Tag">&lt;s:Sequence</span><span class="MXMLDefault_Text"> effectEnd="</span><span class="ActionScriptDefault_Text">sequence_effectEndHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">" effectStart="</span><span class="ActionScriptDefault_Text">sequence_effectStartHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
                <span class="MXMLComponent_Tag">&lt;s:Resize</span><span class="MXMLDefault_Text"> duration="</span><span class="MXMLString">800</span><span class="MXMLDefault_Text">" target="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">viewBox</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
                <span class="MXMLComponent_Tag">&lt;s:Rotate</span><span class="MXMLDefault_Text"> angleBy="</span><span class="MXMLString">180</span><span class="MXMLDefault_Text">"
                          autoCenterTransform="</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">"
                          duration="</span><span class="MXMLString">300</span><span class="MXMLDefault_Text">"
                          target="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">toggleIcon</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;/s:Sequence&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/s:Transition&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/s:transitions&gt;</span>

    <span class="MXMLComponent_Tag">&lt;s:BorderContainer</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">viewBox</span><span class="MXMLDefault_Text">"
                       width="</span><span class="MXMLString">250</span><span class="MXMLDefault_Text">" width.collapsed="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">250</span><span class="MXMLDefault_Text">" height.collapsed="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                       backgroundAlpha="</span><span class="MXMLString">1.0</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;esri:Map</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">overviewMap</span><span class="MXMLDefault_Text">"
                  width="</span><span class="MXMLString">250</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">250</span><span class="MXMLDefault_Text">"
                  attributionVisible="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                  clickRecenterEnabled="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                  doubleClickZoomEnabled="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                  keyboardNavigationEnabled="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                  load="</span><span class="ActionScriptDefault_Text">overviewMap_loadHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">"
                  logoVisible="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                  mask="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">mapMask</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                  panArrowsVisible="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                  panEnabled="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                  rubberbandZoomEnabled="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                  scaleBarVisible="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                  scrollWheelZoomEnabled="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                  wrapAround180="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">wrapAround180</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                  zoomSliderVisible="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLComponent_Tag">&lt;s:BorderContainer</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">mapMask</span><span class="MXMLDefault_Text">"
                           width="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">viewBox</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">viewBox</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLComponent_Tag">&lt;s:Group</span><span class="MXMLDefault_Text"> width="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">viewBox</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">viewBox</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                 includeInLayout.noncollapsible="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"
                 visible.noncollapsible="</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
            <span class="MXMLComponent_Tag">&lt;mx:Image</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">toggleIcon</span><span class="MXMLDefault_Text">"
                      width="</span><span class="MXMLString">23</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">23</span><span class="MXMLDefault_Text">"
                      buttonMode="</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">"
                      mask="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">iconMask</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                      smoothBitmapContent="</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">"
                      source="</span><span class="MXMLString">assets/images/i_expand2.png</span><span class="MXMLDefault_Text">"
                      toolTip.collapsed="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">openToolTip</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                      toolTip.expanded="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">closeToolTip</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"
                      useHandCursor="</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
            <span class="MXMLComponent_Tag">&lt;s:BorderContainer</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">iconMask</span><span class="MXMLDefault_Text">"
                               width="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">width</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" height="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">toggleIcon</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">height</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/s:Group&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/s:BorderContainer&gt;</span>
    <span class="MXMLComponent_Tag">&lt;s:Rect</span><span class="MXMLDefault_Text"> id="</span><span class="MXMLString">borderRect1</span><span class="MXMLDefault_Text">"
            left="</span><span class="MXMLString">-1</span><span class="MXMLDefault_Text">" right="</span><span class="MXMLString">-1</span><span class="MXMLDefault_Text">" top="</span><span class="MXMLString">-1</span><span class="MXMLDefault_Text">" bottom="</span><span class="MXMLString">-1</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;s:stroke&gt;</span>
            <span class="MXMLComponent_Tag">&lt;s:SolidColorStroke</span><span class="MXMLDefault_Text"> color="</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">getStyle</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'contentBackgroundColor'</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">" weight="</span><span class="MXMLString">1</span><span class="MXMLDefault_Text">"</span><span class="MXMLComponent_Tag">/&gt;</span>
        <span class="MXMLComponent_Tag">&lt;/s:stroke&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/s:Rect&gt;</span>

<span class="MXMLComponent_Tag">&lt;/s:SkinnableContainer&gt;</span></pre></body>
</html>
