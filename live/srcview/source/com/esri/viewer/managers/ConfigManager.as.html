<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>ConfigManager.as</title>
<link rel="stylesheet" type="text/css" href="../../../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptComment">///////////////////////////////////////////////////////////////////////////
</span><span class="ActionScriptComment">// Copyright (c) 2010-2011 Esri. All Rights Reserved.
</span><span class="ActionScriptComment">//
</span><span class="ActionScriptComment">// Licensed under the Apache License, Version 2.0 (the "License");
</span><span class="ActionScriptComment">// you may not use this file except in compliance with the License.
</span><span class="ActionScriptComment">// You may obtain a copy of the License at
</span><span class="ActionScriptComment">//
</span><span class="ActionScriptComment">//    http://www.apache.org/licenses/LICENSE-2.0
</span><span class="ActionScriptComment">//
</span><span class="ActionScriptComment">// Unless required by applicable law or agreed to in writing, software
</span><span class="ActionScriptComment">// distributed under the License is distributed on an "AS IS" BASIS,
</span><span class="ActionScriptComment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
</span><span class="ActionScriptComment">// See the License for the specific language governing permissions and
</span><span class="ActionScriptComment">// limitations under the License.
</span><span class="ActionScriptComment">///////////////////////////////////////////////////////////////////////////
</span><span class="ActionScriptpackage">package</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">managers</span>
<span class="ActionScriptBracket/Brace">{</span>

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">components</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IdentityManager</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PortalEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WebMapEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometry</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Extent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArcGISDynamicMapServiceLayer</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArcGISImageServiceLayer</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArcGISTiledMapServiceLayer</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CSVLayer</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FeatureLayer</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">KMLLayer</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Layer</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">OpenStreetMapLayer</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WMSLayer</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">supportClasses</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Field</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">supportClasses</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">LOD</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">portal</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Portal</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">portal</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">WebMapUtil</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">portal</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">supportClasses</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PortalItem</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">tasks</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">GeometryServiceSingleton</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ags</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">virtualearth</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">VETiledLayer</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">AppEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ConfigData</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ViewerContainer</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ErrorMessageUtil</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">LayerObjectUtil</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">LocalizationUtil</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">esri</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">PortalBasemapAppender</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Event</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">EventDispatcher</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">IOErrorEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">SecurityErrorEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">utils</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">flash_proxy</span>;

<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">collections</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ArrayCollection</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">controls</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Alert</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">AsyncResponder</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">AsyncToken</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CallResponder</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Fault</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">Responder</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FaultEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">events</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ResultEvent</span>;
<span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rpc</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">http</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">HTTPService</span>;

<span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Event</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"configLoaded"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">type</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">"com.esri.viewer.AppEvent"</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">]</span>

<span class="ActionScriptASDoc">/**
 * ConfigManager is used to parse the configuration file and store the information in ConfigData.
 * The default configuration file is config.xml, but you can specify an alternative configuration file,
 * e.g. http://myserver/flexviewer/index.html?config=myconfig.xml
 *
 * The name of the default configuration file is specified in ViewerContainer.mxml.
 */</span>
<span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">ConfigManager</span> <span class="ActionScriptReserved">extends</span> <span class="ActionScriptDefault_Text">EventDispatcher</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">CONFIG_MANAGER</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"ConfigManager"</span>;
    <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">DEFAULT_GEOMETRY_SERVICE_URL</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"http://tasks.arcgisonline.com/ArcGIS/rest/services/Geometry/GeometryServer"</span>;

    <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">configData</span>:<span class="ActionScriptDefault_Text">ConfigData</span>;

    <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">ConfigManager</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">//make sure the container is properly initialized and then
</span>        <span class="ActionScriptComment">//proceed with configuration initialization.
</span>        <span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CONTAINER_INITIALIZED</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">containerInitializedHandler</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>

    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">containerInitializedHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptDefault_Text">loadApplicationItem</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptComment">// loadConfig();
</span>    <span class="ActionScriptBracket/Brace">}</span>

    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">loadApplicationItem</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">appid</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">appid</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">appid</span>;
            
            <span class="ActionScriptReserved">const</span> <span class="ActionScriptDefault_Text">idMgrEnabled</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">IdentityManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">instance</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">enabled</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">portal</span>:<span class="ActionScriptDefault_Text">Portal</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Portal</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptComment">// the Portal constructor enables the IdentityManager so restore it back to what it was
</span>            <span class="ActionScriptDefault_Text">IdentityManager</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">instance</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">idMgrEnabled</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">callResponder</span>:<span class="ActionScriptDefault_Text">CallResponder</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">CallResponder</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">callResponder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">RESULT</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">portal_loadHandler</span><span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">callResponder</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">token</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">portal</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getItem</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">appid</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"no appid"</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptComment">// and back to the normal flow
</span>            <span class="ActionScriptDefault_Text">loadConfig</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>        
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">portal_loadHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptComment">// and back to the normal flow
</span>        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">thisApp</span>:<span class="ActionScriptDefault_Text">PortalItem</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">result</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">PortalItem</span>;
        <span class="ActionScriptDefault_Text">thisApp</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getJSONData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">AsyncResponder</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">jsonResponder_resultHandler</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">esriService_faultHandler</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>

    <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">jsonResponder_resultHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">data</span>:<span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">token</span>:<span class="ActionScriptDefault_Text">AsyncToken</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">data</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">values</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">search</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScripttrace">trace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">data</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">values</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">webmap</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">search</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">data</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">values</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">search</span>;
        <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">webmap</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">data</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">values</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">webmap</span>;
        <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">scale</span> <span class="ActionScriptOperator">=</span>  <span class="ActionScriptDefault_Text">data</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">values</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">scale</span>;
        <span class="ActionScriptDefault_Text">loadConfig</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
    
    <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">esriService_faultHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">FaultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">faultstring</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fault</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">faultString</span>;
        <span class="ActionScriptDefault_Text">Alert</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">faultstring</span><span class="ActionScriptBracket/Brace">)</span>;

        <span class="ActionScriptComment">//AppEvent.showError(LocalizationUtil.getDefaultString("couldNotConnectToPortal"), PORTAL_BASEMAP_APPENDER);
</span>        <span class="ActionScriptComment">//dispatchComplete();
</span>        
        <span class="ActionScriptComment">// and back to the normal flow
</span>        <span class="ActionScriptDefault_Text">loadConfig</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>

    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">loadConfig</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">configService</span>:<span class="ActionScriptDefault_Text">HTTPService</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">HTTPService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptDefault_Text">configService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">configFile</span>;
        <span class="ActionScriptDefault_Text">configService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">resultFormat</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">HTTPService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">RESULT_FORMAT_TEXT</span>;
        <span class="ActionScriptDefault_Text">configService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">RESULT</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">configService_resultHandler</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptDefault_Text">configService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FaultEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">FAULT</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">configService_faultHandler</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptDefault_Text">configService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">send</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>

    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">configService_faultHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">FaultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sInfo</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;

        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fault</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rootCause</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">IOErrorEvent</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">ioe</span>:<span class="ActionScriptDefault_Text">IOErrorEvent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fault</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rootCause</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">IOErrorEvent</span>;
            <span class="ActionScriptComment">// Missing config file
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ioe</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorID</span> <span class="ActionScriptOperator">==</span> 2032<span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">sInfo</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">LocalizationUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getDefaultString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'missingConfigFileText'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">configFile</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"\n\n"</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">// some other IOError
</span>                <span class="ActionScriptDefault_Text">sInfo</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fault</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rootCause</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"\n\n"</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fault</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rootCause</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">SecurityErrorEvent</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sec</span>:<span class="ActionScriptDefault_Text">SecurityErrorEvent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fault</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rootCause</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">SecurityErrorEvent</span>;
            <span class="ActionScriptComment">// config file with crossdomain issue
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sec</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">errorID</span> <span class="ActionScriptOperator">==</span> 2048<span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">sInfo</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">LocalizationUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getDefaultString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'configFileCrossDomain'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">"\n"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">sec</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"\n\n"</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// some other Security error
</span>            <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">sInfo</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fault</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">rootCause</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"\n\n"</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">statusCode</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptComment">// e.g. 404 - Not Found - http://en.wikipedia.org/wiki/List_of_HTTP_status_codes
</span>        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">sInfo</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">LocalizationUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getDefaultString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'httpResponseStatus'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">statusCode</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"\n\n"</span>;
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptDefault_Text">sInfo</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">LocalizationUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getDefaultString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'faultCode'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fault</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">faultCode</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"\n\n"</span>;
        <span class="ActionScriptDefault_Text">sInfo</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">LocalizationUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getDefaultString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'faultInfo'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fault</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">faultString</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"\n\n"</span>;
        <span class="ActionScriptDefault_Text">sInfo</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">LocalizationUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getDefaultString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">'faultDetail'</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fault</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">faultDetail</span><span class="ActionScriptBracket/Brace">)</span>;

        <span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">showError</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">sInfo</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">CONFIG_MANAGER</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>

    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">configService_resultHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>   
        <span class="ActionScriptReserved">try</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">//parse main configuration file to create config data object
</span>            <span class="ActionScriptDefault_Text">configData</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ConfigData</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">configXML</span>:<span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">XML</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">result</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">configXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span>:<span class="ActionScriptDefault_Text">int</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">j</span>:<span class="ActionScriptDefault_Text">int</span>;

            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptComment">//Proxy configuration
</span>            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">proxyUrl</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">httpproxy</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">proxyUrl</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyUrl</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">proxyUrl</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptComment">//BingKey configuration
</span>            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bingKey</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bing</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">key</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bingKey</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bingKey</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bingKey</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptComment">//GeometryService configuration
</span>            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">geometryService</span>:<span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometryservice</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">url</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">url</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptString">""</span>;
                <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">token</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">token</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">token</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span> : <span class="ActionScriptString">""</span>;
                <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useproxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">useproxy</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"true"</span>;

                <span class="ActionScriptDefault_Text">GeometryServiceSingleton</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">instance</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">token</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">token</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">useproxy</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">GeometryServiceSingleton</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">instance</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyUrl</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">geometryServiceURL</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometryService</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span> : <span class="ActionScriptDefault_Text">DEFAULT_GEOMETRY_SERVICE_URL</span>;
                <span class="ActionScriptDefault_Text">GeometryServiceSingleton</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">instance</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">geometryServiceURL</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptComment">//Style configuration
</span>            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">styleAlpha</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">XMLList</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span> : <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stylealpha</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">styleAlpha</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">styleAlpha</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">styleAlpha</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">styleColors</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">colors</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">styleColors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">==</span> 1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptComment">// if style.colors are not specified, then check for stylecolors for backwards compatibility with version 2.1
</span>            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">styleColors</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">stylecolors</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">colorStr</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">""</span>;
            <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">colorStr</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">styleColors</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">styleColors</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">uint</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">colorStr</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">styleFontName</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">font</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">name</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">styleFontSize</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">font</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">size</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">font</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"font"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">name</span>: <span class="ActionScriptDefault_Text">styleFontName</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">size</span>: <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">styleFontSize</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">font</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">font</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">styleTitleFontName</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">titlefont</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">name</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">styleTitleFontSize</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">titlefont</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">size</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">titleFont</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"titleFont"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">name</span>: <span class="ActionScriptDefault_Text">styleTitleFontName</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">size</span>: <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">styleTitleFontSize</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">titleFont</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">titleFont</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">styleSubTitleFontName</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">subtitlefont</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">name</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">styleSubTitleFontSize</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">style</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">subtitlefont</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">size</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">subTitleFont</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"subTitleFont"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">name</span>: <span class="ActionScriptDefault_Text">styleSubTitleFontName</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">size</span>: <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">styleSubTitleFontSize</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">subTitleFont</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subTitleFont</span>;

            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptComment">//layoutDirection configuration
</span>            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layoutDirection</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layoutdirection</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layoutDirection</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layoutDirection</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layoutDirection</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptComment">//user interface
</span>            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">configUI</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">value</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">title</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">title</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"title"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">value</span>: <span class="ActionScriptDefault_Text">value</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">configUI</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">title</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptDefault_Text">value</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">subtitle</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">subtitle</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"subtitle"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">value</span>: <span class="ActionScriptDefault_Text">value</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">configUI</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">subtitle</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptDefault_Text">value</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">logo</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">logo</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"logo"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">value</span>: <span class="ActionScriptDefault_Text">value</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">configUI</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">logo</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptDefault_Text">value</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">splashpage</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">url</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">value</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">splashConfig</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">splashpage</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">config</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">spashConfigXML</span>:<span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">splashConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">===</span> <span class="ActionScriptString">"#"</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">spashConfigXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">configuration</span><span class="ActionScriptOperator">.</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">splashConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">splashTitle</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">splashpage</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">label</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">splashPage</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"splashpage"</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">value</span>: <span class="ActionScriptDefault_Text">value</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">config</span>: <span class="ActionScriptDefault_Text">splashConfig</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">configXML</span>: <span class="ActionScriptDefault_Text">spashConfigXML</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">title</span>: <span class="ActionScriptDefault_Text">splashTitle</span>
                    <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">configUI</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">splashPage</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wleft</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widgetcontainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">left</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wright</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widgetcontainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">right</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wtop</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widgetcontainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">top</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wbottom</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widgetcontainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">bottom</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wlayout</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widgetcontainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">layout</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">wlayout</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">wlayout</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"horizontal"</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wleft</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">wright</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">wtop</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">wbottom</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">wlayout</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">widgetContainer</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"widgetcontainer"</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">left</span>: <span class="ActionScriptDefault_Text">wleft</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">right</span>: <span class="ActionScriptDefault_Text">wright</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">top</span>: <span class="ActionScriptDefault_Text">wtop</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">bottom</span>: <span class="ActionScriptDefault_Text">wbottom</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">layout</span>: <span class="ActionScriptDefault_Text">wlayout</span>
                    <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">configUI</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">widgetContainer</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">viewerUI</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configUI</span>;

            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptComment">//controls
</span>            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">configControls</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlList</span>:<span class="ActionScriptDefault_Text">XMLList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widget</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlIdWeight</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 1000;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">controlList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlIcon</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controlList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">icon</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlLabel</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controlList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">label</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlLeft</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controlList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">left</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlRight</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controlList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">right</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlTop</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controlList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">top</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlBottom</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controlList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">bottom</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlHorizontalCenter</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controlList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">horizontalcenter</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlVerticalCenter</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controlList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">verticalcenter</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlVisible</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controlList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">visible</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlConfig</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controlList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">config</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlUrl</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">controlList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">url</span>;

                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">controlConfigXML</span>:<span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">controlConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">===</span> <span class="ActionScriptString">"#"</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">controlConfigXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">configuration</span><span class="ActionScriptOperator">.</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">controlConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptBracket/Brace">}</span>

                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">control</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptDefault_Text">controlIdWeight</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">icon</span>: <span class="ActionScriptDefault_Text">controlIcon</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">label</span>: <span class="ActionScriptDefault_Text">controlLabel</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">left</span>: <span class="ActionScriptDefault_Text">controlLeft</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">right</span>: <span class="ActionScriptDefault_Text">controlRight</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">top</span>: <span class="ActionScriptDefault_Text">controlTop</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">bottom</span>: <span class="ActionScriptDefault_Text">controlBottom</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">horizontalCenter</span>: <span class="ActionScriptDefault_Text">controlHorizontalCenter</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">verticalCenter</span>: <span class="ActionScriptDefault_Text">controlVerticalCenter</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">visible</span>: <span class="ActionScriptDefault_Text">controlVisible</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">config</span>: <span class="ActionScriptDefault_Text">controlConfig</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">configXML</span>: <span class="ActionScriptDefault_Text">controlConfigXML</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">url</span>: <span class="ActionScriptDefault_Text">controlUrl</span>
                    <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">configControls</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">control</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">controls</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configControls</span>;

            <span class="ActionScriptComment">//=================================================
</span>            <span class="ActionScriptComment">//map
</span>            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mapAttrs</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">initialExtent</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">initialextent</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">extent</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">extentParam</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">extent</span>;
                <span class="ActionScriptDefault_Text">initialExtent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">extentParam</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">/,/g</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">" "</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">initialExtent</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">iExt</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"initial"</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">extent</span>: <span class="ActionScriptDefault_Text">initialExtent</span>
                    <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iExt</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">fullExtent</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">fullextent</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">fullExtent</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">fExt</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"full"</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">extent</span>: <span class="ActionScriptDefault_Text">fullExtent</span>
                    <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">fExt</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mapCenter</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">center</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">center</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">centerParam</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">center</span>;
                <span class="ActionScriptDefault_Text">mapCenter</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">centerParam</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">replace</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">/,/g</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptString">" "</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mapCenter</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">centerObj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"center"</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">center</span>: <span class="ActionScriptDefault_Text">mapCenter</span>
                    <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">centerObj</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mapLevel</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">level</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">level</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">mapLevel</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">level</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mapLevel</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">levelObj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"level"</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">level</span>: <span class="ActionScriptDefault_Text">mapLevel</span>
                    <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">levelObj</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mapScale</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">scale</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">scale</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">mapScale</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">scale</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mapScale</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">scaleObj</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"scale"</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">scale</span>: <span class="ActionScriptDefault_Text">mapScale</span>
                    <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">scaleObj</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mapLeft</span>:<span class="ActionScriptDefault_Text">Number</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mapRight</span>:<span class="ActionScriptDefault_Text">Number</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mapTop</span>:<span class="ActionScriptDefault_Text">Number</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mapBottom</span>:<span class="ActionScriptDefault_Text">Number</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">left</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">mapLeft</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">left</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">right</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">mapRight</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">right</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">top</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">mapTop</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">top</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">bottom</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">mapBottom</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">bottom</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">size</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"map"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">left</span>: <span class="ActionScriptDefault_Text">mapLeft</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">right</span>: <span class="ActionScriptDefault_Text">mapRight</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">top</span>: <span class="ActionScriptDefault_Text">mapTop</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">bottom</span>: <span class="ActionScriptDefault_Text">mapBottom</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">size</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wkid</span>:<span class="ActionScriptDefault_Text">Number</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wkt</span>:<span class="ActionScriptDefault_Text">String</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">wkid</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">wkid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">wkid</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">wkt</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">wkt</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">wkt</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">ref</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"spatialref"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">wkid</span>: <span class="ActionScriptDefault_Text">wkid</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">wkt</span>: <span class="ActionScriptDefault_Text">wkt</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ref</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">zoomSliderVisible</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">zoomslidervisible</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"true"</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">zoomSliderVisibility</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"zoomSlider"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">zoomSliderVisible</span>: <span class="ActionScriptDefault_Text">zoomSliderVisible</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">zoomSliderVisibility</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">scaleBarVisible</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">scalebarvisible</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">scalebarvisible</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"true"</span> : <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">scaleBarStyleName</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">scalebar</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">scaleBarProperties</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"scaleBar"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">scaleBarVisible</span>: <span class="ActionScriptDefault_Text">scaleBarVisible</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">scaleBarStyleName</span>: <span class="ActionScriptDefault_Text">scaleBarStyleName</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">scaleBarProperties</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">esriLogoVisible</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">esrilogovisible</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">esrilogovisible</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"true"</span> : <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">esriLogoVisibility</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"esriLogo"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">esriLogoVisible</span>: <span class="ActionScriptDefault_Text">esriLogoVisible</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">esriLogoVisibility</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">openHandCursorVisible</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">openhandcursorvisible</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">openhandcursorvisible</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"true"</span> : <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">openHandCursorVisiblility</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"openHandCursor"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">openHandCursorVisible</span>: <span class="ActionScriptDefault_Text">openHandCursorVisible</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">openHandCursorVisiblility</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wrapAround180</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">wraparound180</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">wraparound180</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"true"</span> : <span class="ActionScriptReserved">false</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wrapAround180Attr</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"wrapAround180"</span><span class="ActionScriptOperator">,</span>
                    <span class="ActionScriptDefault_Text">wrapAround180</span>: <span class="ActionScriptDefault_Text">wrapAround180</span>
                <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wrapAround180Attr</span><span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mapRotation</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseFloat</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">rotation</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isNaN</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mapRotation</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">mapRotationAttr</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"mapRotation"</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">mapRotation</span>: <span class="ActionScriptDefault_Text">mapRotation</span>
                    <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">mapRotationAttr</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">panEasingFactor</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseFloat</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">paneasingfactor</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isNaN</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">panEasingFactor</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">panEasingFactorAttr</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"panEasingFactor"</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">panEasingFactor</span>: <span class="ActionScriptDefault_Text">panEasingFactor</span>
                    <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">panEasingFactorAttr</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">units</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">units</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">units</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">unitsAttr</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"units"</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">units</span>: <span class="ActionScriptDefault_Text">units</span>
                    <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">unitsAttr</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lodsList</span>:<span class="ActionScriptDefault_Text">XMLList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">lods</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">lod</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">lodsList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lods</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
                <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lod</span>:<span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">lodsList</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">resolution</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lod</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">resolution</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">scale</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">lod</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">scale</span>;
                    <span class="ActionScriptDefault_Text">lods</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">LOD</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">NaN</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">resolution</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">scale</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"lods"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">lods</span>: <span class="ActionScriptDefault_Text">lods</span> <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">attributionvisible</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">attributionVisible</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">attributionvisible</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">"false"</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">attributionVisibleAttr</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"attributionVisible"</span><span class="ActionScriptOperator">,</span>
                        <span class="ActionScriptDefault_Text">attributionVisible</span>: <span class="ActionScriptDefault_Text">attributionVisible</span>
                    <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">attributionVisibleAttr</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapAttrs</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">mapAttrs</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">configWebMapItemID</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">webmap</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">itemid</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">urlConfigWebMapItemID</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">webmap</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">urlConfigParams</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itemid</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">webMapItemID</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">urlConfigWebMapItemID</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptDefault_Text">urlConfigWebMapItemID</span> : <span class="ActionScriptDefault_Text">configWebMapItemID</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">portalURL</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">portalurl</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">arcgissharingurl</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">addArcGISBasemaps</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">addarcgisbasemaps</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"true"</span>;

            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">webMapItemID</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">webMapUtil</span>:<span class="ActionScriptDefault_Text">WebMapUtil</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">WebMapUtil</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">webMapUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bingMapsKey</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bingKey</span>;
                <span class="ActionScriptDefault_Text">webMapUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyUrl</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">GeometryServiceSingleton</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">instance</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">webMapUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">geometryService</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">GeometryServiceSingleton</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">instance</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">portalURL</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">webMapUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">portalURL</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">portalURL</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">webMapUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">createMapById</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">webMapItemID</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Responder</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">webMapUtil_createMapByIdResultHandler</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">webMapUtil_createMapByIdFaultHandler</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">webMapUtil_createMapByIdResultHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">result</span>:<span class="ActionScriptDefault_Text">WebMapEvent</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">title</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">value</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">title</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">value</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">result</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">item</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">title</span>;
                    <span class="ActionScriptBracket/Brace">}</span>

                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">baseMapTitle</span>:<span class="ActionScriptDefault_Text">String</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">result</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itemData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">baseMap</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">baseMapTitle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">result</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itemData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">baseMap</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">title</span>;
                    <span class="ActionScriptBracket/Brace">}</span>

                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layers</span>:<span class="ActionScriptDefault_Text">ArrayCollection</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">result</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layers</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArrayCollection</span>;
                    <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layer</span>:<span class="ActionScriptDefault_Text">Layer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>;
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isOpLayer</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">indexOf</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"base"</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">!=</span> 0;

                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">isOpLayer</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">baseMapTitle</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">baseMapTitle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span>;
                        <span class="ActionScriptBracket/Brace">}</span>

                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">label</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">baseMapTitle</span>;
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isOpLayer</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">label</span>;

                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lyrXML</span>:<span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">createLayerXML</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">label</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">isOpLayer</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opLayers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">LayerObjectUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getLayerObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">bingKey</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">proxyUrl</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptReserved">else</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opLayers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">reference</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                                <span class="ActionScriptBracket/Brace">}</span>
                                <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">basemaps</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">LayerObjectUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getLayerObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">false</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">bingKey</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">layer</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">proxyUrl</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">initialExtent</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">extent</span>:<span class="ActionScriptDefault_Text">Extent</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">result</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">extent</span>;
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">extent</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">extentArr</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[</span> <span class="ActionScriptDefault_Text">extent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">xmin</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">extent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ymin</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">extent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">xmax</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">extent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">ymax</span> <span class="ActionScriptBracket/Brace">]</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">iExt</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptString">"initial"</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">extent</span>: <span class="ActionScriptDefault_Text">extentArr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">join</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">" "</span><span class="ActionScriptBracket/Brace">)</span>
                                <span class="ActionScriptBracket/Brace">}</span>;
                            <span class="ActionScriptDefault_Text">mapAttrs</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">iExt</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>

                    <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">webMapData</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">result</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">itemData</span>;

                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">addArcGISBasemaps</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">appendPortalBasemaps</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">portalURL</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">else</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dispatch</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CONFIG_LOADED</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>

                <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">webMapUtil_createMapByIdFaultHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">error</span>:<span class="ActionScriptDefault_Text">Fault</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">showError</span><span class="ActionScriptBracket/Brace">(</span>
                        <span class="ActionScriptDefault_Text">ErrorMessageUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getKnownErrorCauseMessage</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">error</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"\n\n"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">ErrorMessageUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">buildFaultMessage</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">error</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">CONFIG_MANAGER</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">//================================================
</span>                <span class="ActionScriptComment">//map:basemaps
</span>                <span class="ActionScriptComment">//================================================
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">configBasemaps</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">maplayerList</span>:<span class="ActionScriptDefault_Text">XMLList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">basemaps</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapservice</span>; <span class="ActionScriptComment">// TODO - is this still in use ???
</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">maplayerList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">&lt;</span> 1<span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">maplayerList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">basemaps</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layer</span>;
                <span class="ActionScriptBracket/Brace">}</span>

                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">maplayerList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">configBasemaps</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">LayerObjectUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getLayerObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">maplayerList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">false</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">bingKey</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">proxyUrl</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">basemaps</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configBasemaps</span>;

                <span class="ActionScriptComment">//================================================
</span>                <span class="ActionScriptComment">//map:operationalLayers
</span>                <span class="ActionScriptComment">//================================================
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">configOpLayers</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">opLayerList</span>:<span class="ActionScriptDefault_Text">XMLList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">map</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">operationallayers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">layer</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">opLayerList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">configOpLayers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">LayerObjectUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getLayerObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">opLayerList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">bingKey</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">proxyUrl</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">opLayers</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configOpLayers</span>;
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptComment">//=================================================
</span>            <span class="ActionScriptComment">//widgets
</span>            <span class="ActionScriptComment">//================================================
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">configWidgets</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">widgetContainerList</span>:<span class="ActionScriptDefault_Text">XMLList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widgetcontainer</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">widgetId</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">w</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">w</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">widgetContainerList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptDefault_Text">w</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wContainer</span>:<span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetContainerList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">w</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">XML</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">isPartOfPanel</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">paneltype</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">?</span> <span class="ActionScriptReserved">true</span> : <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">wContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">children</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">xmlObject</span>:<span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">children</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xmlObject</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"widgetgroup"</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">widgetGroupList</span>:<span class="ActionScriptDefault_Text">XMLList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">XMLList</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xmlObject</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">createWidgets</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">widgetGroupList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widget</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">isPartOfPanel</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">widgetGroupList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widget</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">widgetGroupList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">label</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">widgetGroupList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">icon</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">else</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">widgetList</span>:<span class="ActionScriptDefault_Text">XMLList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">XMLList</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xmlObject</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">createWidgets</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">false</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">isPartOfPanel</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createWidgets</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">widgetList</span>:<span class="ActionScriptDefault_Text">XMLList</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">grouped</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">isPartOfPanel</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">groupLength</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">groupLabel</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">groupIcon</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">widgetListLength</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">p</span>:<span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">p</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">widgetListLength</span>; <span class="ActionScriptDefault_Text">p</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptComment">// if grouped
</span>                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wGrouped</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">grouped</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wGroupLength</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">groupLength</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wGroupIcon</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">groupIcon</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wGroupLabel</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">groupLabel</span>;

                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wLabel</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">label</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wIcon</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">icon</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wConfig</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">config</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wPreload</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">preload</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wWidth</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">width</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wHeight</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">height</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wUrl</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">url</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wx</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">x</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wy</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">y</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wLeft</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">left</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wTop</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">top</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wRight</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">right</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wBottom</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">widgetList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">p</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">bottom</span>;

                    <span class="ActionScriptComment">// Look for embedded configuration
</span>                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wConfigXML</span>:<span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">===</span> <span class="ActionScriptString">"#"</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">wConfigXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">configuration</span><span class="ActionScriptOperator">.</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">wConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">wGroupIcon</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">wGroupIcon</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DEFAULT_WIDGET_GROUP_ICON</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">wIcon</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">wIcon</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DEFAULT_WIDGET_ICON</span>;
                    <span class="ActionScriptBracket/Brace">}</span>

                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">widget</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptDefault_Text">widgetId</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">grouped</span>: <span class="ActionScriptDefault_Text">wGrouped</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">groupLength</span>: <span class="ActionScriptDefault_Text">wGroupLength</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">groupIcon</span>: <span class="ActionScriptDefault_Text">wGroupIcon</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">groupLabel</span>: <span class="ActionScriptDefault_Text">wGroupLabel</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">label</span>: <span class="ActionScriptDefault_Text">wLabel</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">icon</span>: <span class="ActionScriptDefault_Text">wIcon</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">config</span>: <span class="ActionScriptDefault_Text">wConfig</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">configXML</span>: <span class="ActionScriptDefault_Text">wConfigXML</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptComment">// reference to emdedded XML configuration (if any)
</span>                            <span class="ActionScriptDefault_Text">preload</span>: <span class="ActionScriptDefault_Text">wPreload</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">width</span>: <span class="ActionScriptDefault_Text">wWidth</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">height</span>: <span class="ActionScriptDefault_Text">wHeight</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">x</span>: <span class="ActionScriptDefault_Text">wx</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">y</span>: <span class="ActionScriptDefault_Text">wy</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">left</span>: <span class="ActionScriptDefault_Text">wLeft</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">top</span>: <span class="ActionScriptDefault_Text">wTop</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">right</span>: <span class="ActionScriptDefault_Text">wRight</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">bottom</span>: <span class="ActionScriptDefault_Text">wBottom</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">url</span>: <span class="ActionScriptDefault_Text">wUrl</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">isPartOfPanel</span>: <span class="ActionScriptDefault_Text">isPartOfPanel</span>
                        <span class="ActionScriptBracket/Brace">}</span>;
                    <span class="ActionScriptDefault_Text">configWidgets</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">widget</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">widgetId</span><span class="ActionScriptOperator">++</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widgets</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configWidgets</span>;

            <span class="ActionScriptComment">//=================================================
</span>            <span class="ActionScriptComment">//widgetContainers
</span>            <span class="ActionScriptComment">//   [] ={container, widgets}
</span>            <span class="ActionScriptComment">//================================================
</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wContainers</span>:<span class="ActionScriptDefault_Text">XMLList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widgetcontainer</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">configWContainers</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wid</span>:<span class="ActionScriptDefault_Text">uint</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">n</span>:<span class="ActionScriptDefault_Text">int</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">xmlObj</span>:<span class="ActionScriptDefault_Text">XML</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">//get container parameters                
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wcPanelType</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">paneltype</span>;

                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgContainer</span>:<span class="ActionScriptDefault_Text">Object</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">contWidgets</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wcPanelType</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wcSize</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">size</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wcInitialState</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">"open"</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">initialstate</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">wcInitialState</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">initialstate</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptDefault_Text">wgContainer</span> <span class="ActionScriptOperator">=</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">panelType</span>: <span class="ActionScriptDefault_Text">wcPanelType</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">initialState</span>: <span class="ActionScriptDefault_Text">wcInitialState</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">size</span>: <span class="ActionScriptDefault_Text">wcSize</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">obj</span>: <span class="ActionScriptReserved">null</span>
                        <span class="ActionScriptBracket/Brace">}</span>;

                    <span class="ActionScriptComment">//get widget for this container                 
</span>                    <span class="ActionScriptDefault_Text">wid</span> <span class="ActionScriptOperator">=</span> 0;
                    <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">n</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">n</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">children</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptDefault_Text">n</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">xmlObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">children</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">n</span><span class="ActionScriptBracket/Brace">]</span>;

                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgLabel</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xmlObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">label</span>;
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgConfig</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xmlObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">config</span>;
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgWidth</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xmlObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">width</span>;
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgHeight</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xmlObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">height</span>;
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgUrl</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xmlObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">url</span>;

                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgConfigXML</span>:<span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wgConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">===</span> <span class="ActionScriptString">"#"</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">wgConfigXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">configuration</span><span class="ActionScriptOperator">.</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">wgConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wg</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptDefault_Text">wid</span><span class="ActionScriptOperator">,</span>
                                <span class="ActionScriptDefault_Text">label</span>: <span class="ActionScriptDefault_Text">wgLabel</span><span class="ActionScriptOperator">,</span>
                                <span class="ActionScriptDefault_Text">config</span>: <span class="ActionScriptDefault_Text">wgConfig</span><span class="ActionScriptOperator">,</span>
                                <span class="ActionScriptDefault_Text">configXML</span>: <span class="ActionScriptDefault_Text">wgConfigXML</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptComment">// reference to enbedded XML configuration (if any)
</span>                                <span class="ActionScriptDefault_Text">width</span>: <span class="ActionScriptDefault_Text">wgWidth</span><span class="ActionScriptOperator">,</span>
                                <span class="ActionScriptDefault_Text">height</span>: <span class="ActionScriptDefault_Text">wgHeight</span><span class="ActionScriptOperator">,</span>
                                <span class="ActionScriptDefault_Text">url</span>: <span class="ActionScriptDefault_Text">wgUrl</span><span class="ActionScriptOperator">,</span>
                                <span class="ActionScriptDefault_Text">isPartOfPanel</span>: <span class="ActionScriptReserved">true</span>
                            <span class="ActionScriptBracket/Brace">}</span>;
                        <span class="ActionScriptDefault_Text">contWidgets</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wg</span><span class="ActionScriptBracket/Brace">)</span>;

                        <span class="ActionScriptComment">//indexing
</span>                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">windex</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">container</span>: <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">widget</span>: <span class="ActionScriptDefault_Text">wid</span> <span class="ActionScriptBracket/Brace">}</span>;
                        <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widgetIndex</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">windex</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">wid</span><span class="ActionScriptOperator">++</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wcUrl</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">url</span>;
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">wcUrl</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">wcUrl</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DEFAULT_WIDGET_CONTAINER_WIDGET</span>;
                    <span class="ActionScriptBracket/Brace">}</span>

                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wcLeft</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">left</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wcRight</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">right</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wcTop</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">top</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wcBottom</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">bottom</span>;
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wcLayout</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">layout</span>;

                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">wcLayout</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">wcLayout</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DEFAULT_WIDGET_LAYOUT</span>;
                    <span class="ActionScriptBracket/Brace">}</span>

                    <span class="ActionScriptDefault_Text">wgContainer</span> <span class="ActionScriptOperator">=</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">left</span>: <span class="ActionScriptDefault_Text">wcLeft</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">right</span>: <span class="ActionScriptDefault_Text">wcRight</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">top</span>: <span class="ActionScriptDefault_Text">wcTop</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">bottom</span>: <span class="ActionScriptDefault_Text">wcBottom</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">layout</span>: <span class="ActionScriptDefault_Text">wcLayout</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">url</span>: <span class="ActionScriptDefault_Text">wcUrl</span><span class="ActionScriptOperator">,</span>
                            <span class="ActionScriptDefault_Text">obj</span>: <span class="ActionScriptReserved">null</span>
                        <span class="ActionScriptBracket/Brace">}</span>;

                    <span class="ActionScriptComment">//get widgets for this container
</span>                    <span class="ActionScriptDefault_Text">wid</span> <span class="ActionScriptOperator">=</span> 0;
                    <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">n</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">n</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">children</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptDefault_Text">n</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">xmlObj</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wContainers</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">children</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">n</span><span class="ActionScriptBracket/Brace">]</span>;
                        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xmlObj</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">"widgetgroup"</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">widgetGrpList</span>:<span class="ActionScriptDefault_Text">XMLList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">XMLList</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xmlObj</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">getWidgetList</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">widgetGrpList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widget</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">widgetGrpList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widget</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">widgetGrpList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">label</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">widgetGrpList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">icon</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                        <span class="ActionScriptReserved">else</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wdgtList</span>:<span class="ActionScriptDefault_Text">XMLList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">XMLList</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xmlObj</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">getWidgetList</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wdgtList</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>

                    <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getWidgetList</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wgList</span>:<span class="ActionScriptDefault_Text">XMLList</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">grouped</span>:<span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">groupLength</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> 0<span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">groupLabel</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">groupIcon</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptComment">// if grouped
</span>                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgGrouped</span>:<span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">grouped</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgGroupLength</span>:<span class="ActionScriptDefault_Text">Number</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">groupLength</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgGroupIcon</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">groupIcon</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgGroupLabel</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">groupLabel</span>;

                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgLabel</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">label</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgIcon</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">icon</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgConfig</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">config</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgPreload</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">preload</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgWidth</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">width</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgHeight</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">height</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgUrl</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">url</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgx</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">x</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgy</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">y</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgLeft</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">left</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgTop</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">top</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgRight</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">right</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgBottom</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">bottom</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wHorizontalCenter</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">horizontalcenter</span>;
                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wVerticalCenter</span>:<span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wgList</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">verticalcenter</span>;

                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wgConfigXML</span>:<span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wgConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">charAt</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">===</span> <span class="ActionScriptString">"#"</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">wgConfigXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">configuration</span><span class="ActionScriptOperator">.</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">wgConfig</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">wgGroupIcon</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">wgGroupIcon</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DEFAULT_WIDGET_GROUP_ICON</span>;
                            <span class="ActionScriptBracket/Brace">}</span>
                            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">wgIcon</span><span class="ActionScriptBracket/Brace">)</span>
                            <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">wgIcon</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">DEFAULT_WIDGET_ICON</span>;
                            <span class="ActionScriptBracket/Brace">}</span>

                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wg</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span>
                                <span class="ActionScriptBracket/Brace">{</span>
                                    <span class="ActionScriptDefault_Text">id</span>: <span class="ActionScriptDefault_Text">wid</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">grouped</span>: <span class="ActionScriptDefault_Text">wgGrouped</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">groupLength</span>: <span class="ActionScriptDefault_Text">wgGroupLength</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">groupIcon</span>: <span class="ActionScriptDefault_Text">wgGroupIcon</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">groupLabel</span>: <span class="ActionScriptDefault_Text">wgGroupLabel</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">label</span>: <span class="ActionScriptDefault_Text">wgLabel</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">icon</span>: <span class="ActionScriptDefault_Text">wgIcon</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">config</span>: <span class="ActionScriptDefault_Text">wgConfig</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">configXML</span>: <span class="ActionScriptDefault_Text">wgConfigXML</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptComment">// reference to enbedded XML configuration (if any)
</span>                                    <span class="ActionScriptDefault_Text">preload</span>: <span class="ActionScriptDefault_Text">wgPreload</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">width</span>: <span class="ActionScriptDefault_Text">wgWidth</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">height</span>: <span class="ActionScriptDefault_Text">wgHeight</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">x</span>: <span class="ActionScriptDefault_Text">wgx</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">y</span>: <span class="ActionScriptDefault_Text">wgy</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">left</span>: <span class="ActionScriptDefault_Text">wgLeft</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">right</span>: <span class="ActionScriptDefault_Text">wgRight</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">top</span>: <span class="ActionScriptDefault_Text">wgTop</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">bottom</span>: <span class="ActionScriptDefault_Text">wgBottom</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">horizontalCenter</span>: <span class="ActionScriptDefault_Text">wHorizontalCenter</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">verticalCenter</span>: <span class="ActionScriptDefault_Text">wVerticalCenter</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">url</span>: <span class="ActionScriptDefault_Text">wgUrl</span><span class="ActionScriptOperator">,</span>
                                    <span class="ActionScriptDefault_Text">isPartOfPanel</span>: <span class="ActionScriptReserved">false</span>
                                <span class="ActionScriptBracket/Brace">}</span>;
                            <span class="ActionScriptDefault_Text">contWidgets</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wg</span><span class="ActionScriptBracket/Brace">)</span>;

                            <span class="ActionScriptComment">//indexing
</span>                            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">windex</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">container</span>: <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">widget</span>: <span class="ActionScriptDefault_Text">wid</span> <span class="ActionScriptBracket/Brace">}</span>;
                            <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widgetIndex</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">windex</span><span class="ActionScriptBracket/Brace">)</span>;
                            <span class="ActionScriptDefault_Text">wid</span><span class="ActionScriptOperator">++</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>

                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">container</span>:<span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptDefault_Text">container</span>: <span class="ActionScriptDefault_Text">wgContainer</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">widgets</span>: <span class="ActionScriptDefault_Text">contWidgets</span> <span class="ActionScriptBracket/Brace">}</span>;
                <span class="ActionScriptDefault_Text">configWContainers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">container</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">widgetContainers</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">configWContainers</span>;

            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptOperator">!</span><span class="ActionScriptDefault_Text">webMapItemID</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">//================================================
</span>                <span class="ActionScriptComment">//announce configuration is complete
</span>                <span class="ActionScriptComment">//================================================
</span>                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">addArcGISBasemaps</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">appendPortalBasemaps</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">portalURL</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dispatch</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CONFIG_LOADED</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">catch</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">error</span>:<span class="ActionScriptDefault_Text">Error</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">showError</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">LocalizationUtil</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">getDefaultString</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">"parseConfigErrorText"</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">ViewerContainer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">configFile</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"\n"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">error</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">message</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">CONFIG_MANAGER</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
    <span class="ActionScriptBracket/Brace">}</span>

    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createLayerXML</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span>:<span class="ActionScriptDefault_Text">Layer</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">label</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptDefault_Text">XML</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">lyrXML</span>:<span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>;
        <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">ArcGISDynamicMapServiceLayer</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dynLyr</span>:<span class="ActionScriptDefault_Text">ArcGISDynamicMapServiceLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArcGISDynamicMapServiceLayer</span>;
            <span class="ActionScriptDefault_Text">lyrXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">&lt;layer label=</span>{<span class="ActionScriptDefault_Text">label</span>}
                    <span class="ActionScriptReserved">type="dynamic"
                    visible=</span>{<span class="ActionScriptDefault_Text">dynLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span>}
                    <span class="ActionScriptReserved">alpha=</span>{<span class="ActionScriptDefault_Text">dynLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span>}
                    <span class="ActionScriptReserved">useproxy=</span>{<span class="ActionScriptDefault_Text">dynLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span>}
                    <span class="ActionScriptReserved">url=</span>{<span class="ActionScriptDefault_Text">dynLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span>}<span class="ActionScriptReserved">/&gt;</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">dynLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visibleLayers</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">visiblelayers</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">dynLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visibleLayers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toArray</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">join</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">ArcGISImageServiceLayer</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">imgLyr</span>:<span class="ActionScriptDefault_Text">ArcGISImageServiceLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArcGISImageServiceLayer</span>;
            <span class="ActionScriptDefault_Text">lyrXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">&lt;layer label=</span>{<span class="ActionScriptDefault_Text">label</span>}
                    <span class="ActionScriptReserved">type="image"
                    visible=</span>{<span class="ActionScriptDefault_Text">imgLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span>}
                    <span class="ActionScriptReserved">alpha=</span>{<span class="ActionScriptDefault_Text">imgLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span>}
                    <span class="ActionScriptReserved">useproxy=</span>{<span class="ActionScriptDefault_Text">imgLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span>}
                    <span class="ActionScriptReserved">url=</span>{<span class="ActionScriptDefault_Text">imgLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span>}<span class="ActionScriptReserved">/&gt;</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">imgLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bandIds</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">bandids</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">imgLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">bandIds</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">join</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">ArcGISTiledMapServiceLayer</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tiledLyr</span>:<span class="ActionScriptDefault_Text">ArcGISTiledMapServiceLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">ArcGISTiledMapServiceLayer</span>;
            <span class="ActionScriptDefault_Text">lyrXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">&lt;layer label=</span>{<span class="ActionScriptDefault_Text">label</span>}
                    <span class="ActionScriptReserved">type="tiled"
                    visible=</span>{<span class="ActionScriptDefault_Text">tiledLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span>}
                    <span class="ActionScriptReserved">alpha=</span>{<span class="ActionScriptDefault_Text">tiledLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span>}
                    <span class="ActionScriptReserved">useproxy=</span>{<span class="ActionScriptDefault_Text">tiledLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span>}
                    <span class="ActionScriptReserved">url=</span>{<span class="ActionScriptDefault_Text">tiledLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span>}<span class="ActionScriptReserved">/&gt;</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">tiledLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">displayLevels</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">displaylevels</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">tiledLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">displayLevels</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">join</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">FeatureLayer</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptOperator">!</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">CSVLayer</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">feaLyr</span>:<span class="ActionScriptDefault_Text">FeatureLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">FeatureLayer</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">feaLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">featureCollection</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">lyrXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">&lt;layer label=</span>{<span class="ActionScriptDefault_Text">label</span>}
                        <span class="ActionScriptReserved">type="feature"
                        visible=</span>{<span class="ActionScriptDefault_Text">feaLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span>}
                        <span class="ActionScriptReserved">alpha=</span>{<span class="ActionScriptDefault_Text">feaLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span>}
                        <span class="ActionScriptReserved">iseditable=</span>{<span class="ActionScriptDefault_Text">feaLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">isEditable</span>}<span class="ActionScriptReserved">/&gt;</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">else</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">lyrXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">&lt;layer label=</span>{<span class="ActionScriptDefault_Text">label</span>}
                        <span class="ActionScriptReserved">type="feature"
                        visible=</span>{<span class="ActionScriptDefault_Text">feaLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span>}
                        <span class="ActionScriptReserved">alpha=</span>{<span class="ActionScriptDefault_Text">feaLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span>}
                        <span class="ActionScriptReserved">mode=</span>{<span class="ActionScriptDefault_Text">feaLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mode</span>}
                        <span class="ActionScriptReserved">useproxy=</span>{<span class="ActionScriptDefault_Text">feaLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">proxyURL</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span>}
                        <span class="ActionScriptReserved">url=</span>{<span class="ActionScriptDefault_Text">feaLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span>}
                        <span class="ActionScriptReserved">iseditable=</span>{<span class="ActionScriptDefault_Text">feaLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">isEditable</span>}<span class="ActionScriptReserved">/&gt;</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">OpenStreetMapLayer</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">osmLyr</span>:<span class="ActionScriptDefault_Text">OpenStreetMapLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">OpenStreetMapLayer</span>;
            <span class="ActionScriptDefault_Text">lyrXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">&lt;layer label=</span>{<span class="ActionScriptDefault_Text">label</span>}
                    <span class="ActionScriptReserved">type="osm"
                    visible=</span>{<span class="ActionScriptDefault_Text">osmLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span>}
                    <span class="ActionScriptReserved">alpha=</span>{<span class="ActionScriptDefault_Text">osmLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span>}<span class="ActionScriptReserved">/&gt;</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">VETiledLayer</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">veLyr</span>:<span class="ActionScriptDefault_Text">VETiledLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">VETiledLayer</span>;
            <span class="ActionScriptDefault_Text">lyrXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">&lt;layer label=</span>{<span class="ActionScriptDefault_Text">label</span>}
                    <span class="ActionScriptReserved">type="bing"
                    visible=</span>{<span class="ActionScriptDefault_Text">veLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span>}
                    <span class="ActionScriptReserved">alpha=</span>{<span class="ActionScriptDefault_Text">veLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span>}
                    <span class="ActionScriptReserved">style=</span>{<span class="ActionScriptDefault_Text">veLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">mapStyle</span>}<span class="ActionScriptReserved">/&gt;</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">veLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">displayLevels</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">displaylevels</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">veLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">displayLevels</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">join</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">KMLLayer</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">kmlLayer</span>:<span class="ActionScriptDefault_Text">KMLLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">KMLLayer</span>;
            <span class="ActionScriptDefault_Text">lyrXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">&lt;layer label=</span>{<span class="ActionScriptDefault_Text">label</span>}
                    <span class="ActionScriptReserved">type="kml"
                    visible=</span>{<span class="ActionScriptDefault_Text">kmlLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span>}
                    <span class="ActionScriptReserved">alpha=</span>{<span class="ActionScriptDefault_Text">kmlLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span>}
                    <span class="ActionScriptReserved">url=</span>{<span class="ActionScriptDefault_Text">kmlLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span>}<span class="ActionScriptReserved">/&gt;</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">WMSLayer</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">wmsLayer</span>:<span class="ActionScriptDefault_Text">WMSLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">WMSLayer</span>;
            <span class="ActionScriptDefault_Text">lyrXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">&lt;layer label=</span>{<span class="ActionScriptDefault_Text">label</span>}
                    <span class="ActionScriptReserved">type="wms"
                    visible=</span>{<span class="ActionScriptDefault_Text">wmsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span>}
                    <span class="ActionScriptReserved">alpha=</span>{<span class="ActionScriptDefault_Text">wmsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span>}
                    <span class="ActionScriptReserved">version=</span>{<span class="ActionScriptDefault_Text">wmsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">version</span>}
                    <span class="ActionScriptReserved">skipgetcapabilities=</span>{<span class="ActionScriptDefault_Text">wmsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">skipGetCapabilities</span>}
                    <span class="ActionScriptReserved">imageformat=</span>{<span class="ActionScriptDefault_Text">wmsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">imageFormat</span>}
                    <span class="ActionScriptReserved">url=</span>{<span class="ActionScriptDefault_Text">wmsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span>}<span class="ActionScriptReserved">/&gt;</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wmsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">maxImageHeight</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">maximageheight</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wmsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">maxImageHeight</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wmsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">maxImageWidth</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">maximagewidth</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wmsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">maxImageWidth</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">wmsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visibleLayers</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">visiblelayers</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">wmsLayer</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visibleLayers</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">toArray</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">join</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">CSVLayer</span><span class="ActionScriptBracket/Brace">)</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">csvLyr</span>:<span class="ActionScriptDefault_Text">CSVLayer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">CSVLayer</span>;
            <span class="ActionScriptDefault_Text">lyrXML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">&lt;layer label=</span>{<span class="ActionScriptDefault_Text">label</span>}
                    <span class="ActionScriptReserved">type="csv"
                    visible=</span>{<span class="ActionScriptDefault_Text">csvLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">visible</span>}
                    <span class="ActionScriptReserved">alpha=</span>{<span class="ActionScriptDefault_Text">csvLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alpha</span>}
                    <span class="ActionScriptReserved">url=</span>{<span class="ActionScriptDefault_Text">csvLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">url</span>}
                    <span class="ActionScriptReserved">longitudefieldname=</span>{<span class="ActionScriptDefault_Text">csvLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">longitudeFieldName</span>}
                    <span class="ActionScriptReserved">latitudefieldname=</span>{<span class="ActionScriptDefault_Text">csvLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">latitudeFieldName</span>}<span class="ActionScriptReserved">/&gt;</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">csvLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">columnDelimiter</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">","</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">columndelimiter</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">csvLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">columnDelimiter</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">csvLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sourceFields</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">fields</span>:<span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> [];
                <span class="ActionScriptReserved">for each</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">field</span>:<span class="ActionScriptDefault_Text">Field</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">csvLyr</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">sourceFields</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">fields</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">field</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"|"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">field</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">alias</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">"|"</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">field</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">type</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">lyrXML</span><span class="ActionScriptOperator">.</span><span class="ActionScriptOperator">@</span><span class="ActionScriptDefault_Text">sourcefields</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">fields</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">join</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">lyrXML</span>;
    <span class="ActionScriptBracket/Brace">}</span>

    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">appendPortalBasemaps</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">portalURL</span>:<span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">basemapAppender</span>:<span class="ActionScriptDefault_Text">PortalBasemapAppender</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PortalBasemapAppender</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">portalURL</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptDefault_Text">basemapAppender</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">COMPLETE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">basemapAppender_completeHandler</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptDefault_Text">basemapAppender</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">fetchAndAppendPortalBasemaps</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>

    <span class="ActionScriptReserved">protected</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">basemapAppender_completeHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>:<span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span>:<span class="ActionScriptReserved">void</span>
    <span class="ActionScriptBracket/Brace">{</span>
        <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">currentTarget</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">PortalBasemapAppender</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">removeEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">COMPLETE</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">basemapAppender_completeHandler</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">dispatch</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">AppEvent</span><span class="ActionScriptOperator">.</span><span class="ActionScriptDefault_Text">CONFIG_LOADED</span><span class="ActionScriptOperator">,</span> <span class="ActionScriptDefault_Text">configData</span><span class="ActionScriptBracket/Brace">)</span>;
    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>
</pre></body>
</html>
